<?xml version="1.0" encoding="UTF-8"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="file://config.xsd">
	<services>
		<linknx host="localhost" port="1028"/>
		<motion configDirectory="/etc/motion/" backupLocation="ftp://server:port/path/"/>
		<smtp host="localhost" port="25"/>
		<daemon host="localhost" port="1029" fromAddress="me@mailprovider.com"/> 
	</services>
	<modes objectId="Mode">
		<!-- Event that applies for all modes. -->
		<event type="entered">
			<!--<action...> --><!-- Action duplicates will not be executed (based on an object equality comparison). -->
		</event>
		<mode name="Presence" value="1"/>
			<event type="entered"> <!-- Event that applies for the Presence mode only. -->
				<action type="send-email" to="help@example.com" subject="New mode">Mode is now Presence</action>
			</event>
		<mode name="Away" value="2">
			<sensor>EntranceDoorOpening</sensor>
			<sensor>LivingRoomWindowOpening</sensor>
			<class>Camera</class>
			<sensor>Camera1</sensor><!-- Monitor Camera1 in this mode. This sensor will use the overriden activationDelay defined for the Camera class. -->
		</mode>
		<mode name="Night" value="3">
			<sensor>EntranceDoorOpening</sensor>
			<sensor>LivingRoomWindowOpening</sensor>
		</mode>
	</modes>
	<alerts>
		<alert name="Intrusion" persistenceObjectId="IntrusionPersistence" >
			<event type="sensor joigned">
				<action type="send-email" to="address@foo.com" subject="Subject">Mail text</action>
			</event>
			<event type="activated">
				<action type="set-value" id="Siren" value="on"/>
			</event>
			<event type="paused">
				<action type="set-value" id="Siren" value="off"/>
			</event>
		</alert>
	</alerts>
	<sensors>
		<sensor type="OpeningSensor" name="EntranceDoorOpening" location="Entrance">
			<activationDelay>
				<value mode="Away">5</value>
				<value mode="Night">3</value>
			</activationDelay>
			<prealertTimeout>
				<value mode="Away">6</value>
			</prealertTimeout>
		</sensor>
		<class type="boolean" name="OpeningSensor" watchedObjectId="OpeningTrigger{location}" enabledObjectId="{location}Enabled" alert="Intrusion" activationDelay="2" prealertTimeout="0" postalertTimeout="10">
			<activationCriterion type="sensor" sensor="{name}" whenTriggered="False"/>
		</class>
		<class type="camera" name="Camera" watchedObjectId="{name}Trigger" enabledObjectId="{name}Enabled" persistenceObjectId="{name}Persistence" alert="Intrusion" baseURL="http://foo.com/{name}" motionConfig="motionconf/{name}.conf">
			<activationDelay value="2">
				<value mode="Away">10</value><!-- All sensors that inherit the Camera class will use a modified activationDelay for this mode. But those sensors are not implicitly monitored in this mode! -->
			</activationDelay>
		</class>
		<sensor type="OpeningSensor" name="LivingRoomWindowOpening" location="LivingRoom">
			<activationDelay>
				<value mode="Night">3</value>
			</activationDelay>
		</sensor>
		<sensor type="Camera" name="Camera1">
			<activationCriterion type="and">
				<activationCriterion type="sensor" sensor="{name}" whenTriggered="false"/>
				<activationCriterion type="sensor" sensor="SwitchPorte{sensorLocation}" sensorLocation='Entree' whenTriggered="FaLse"/>
			</activationCriterion>
		</sensor>
	</sensors>
</config>
