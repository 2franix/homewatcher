<?xml version="1.0" ?>
<config>
	<modes objectId="Mode">
		<mode name="Presence" value="1">
			<sensor>OutdoorTemperature</sensor>
			<event type="entered">
				<action to="notify@bar.com" type="send-email"/>
				<action from="Mode" to="AppliedMode" type="copy-value"/>
			</event>
			<event type="left">
				<action from="AppliedMode" to="PreviousMode" type="copy-value"/>
			</event>
		</mode>
		<mode name="Away" value="2">
			<sensor>EntranceDoorOpening</sensor>
			<sensor>GarageDoorOpening</sensor>
			<sensor>LivingRoomWindowOpening</sensor>
			<sensor>KitchenWindowOpening</sensor>
			<sensor>KitchenSmokeSensor</sensor>
			<sensor>BedroomSmokeSensor</sensor>
			<sensor>OutdoorTemperature</sensor>
			<event type="entered">
				<action to="notify@bar.com" type="send-email"/>
				<action from="Mode" to="AppliedMode" type="copy-value"/>
			</event>
			<event type="left">
				<action from="AppliedMode" to="PreviousMode" type="copy-value"/>
			</event>
		</mode>
		<mode name="Night" value="3">
			<sensor>EntranceDoorOpening</sensor>
			<sensor>LivingRoomWindowOpening</sensor>
			<sensor>OutdoorTemperature</sensor>
			<event type="entered">
				<action to="notify@bar.com" type="send-email"/>
				<action from="Mode" to="AppliedMode" type="copy-value"/>
			</event>
			<event type="left">
				<action from="AppliedMode" to="PreviousMode" type="copy-value"/>
			</event>
		</mode>
	</modes>
	<alerts>
		<alert inhibitionObjectId="IntrusionInhibition" name="Intrusion" persistenceObjectId="IntrusionPersistence">
			<event type="prealert started">
				<action id="IntrusionAlertStarted" type="set-value" value="on"/>
			</event>
			<event type="sensor joined">
				<action to="intrusion@foo.com" type="send-email"/>
				<action id="IntrusionSensorJoined" type="set-value" value="on"/>
			</event>
			<event type="sensor left">
				<action id="IntrusionSensorLeft" type="set-value" value="on"/>
			</event>
			<event type="activated">
				<action id="Siren" type="set-value" value="on"/>
				<action id="IntrusionAlertActivated" type="set-value" value="on"/>
			</event>
			<event type="paused">
				<action id="Siren" type="set-value" value="off"/>
				<action type="conditional">
					
					
					<condition id="IntrusionSensorLeft" type="object" value="on"/>
					
					
					<action id="IntrusionAlertPaused" type="set-value" value="on"/>
					
				
				</action>
			</event>
			<event type="resumed">
				<action id="IntrusionAlertResumed" type="set-value" value="on"/>
			</event>
			<event type="stopped">
				<action id="IntrusionAlertStopped" type="set-value" value="on"/>
			</event>
		</alert>
		<alert name="Fire" persistenceObjectId="FirePersistence">
			<event type="sensor joined">
				<action to="fire@foo.com" type="send-email"/>
			</event>
			<event type="activated">
				<action id="FireSiren" type="set-value" value="on"/>
			</event>
			<event type="paused">
				<action id="FireSiren" type="set-value" value="off"/>
			</event>
		</alert>
		<alert name="Temperature" persistenceObjectId="TemperaturePersistence">
			<event type="sensor joined">
				<action to="fire@foo.com" type="send-email"/>
			</event>
		</alert>
	</alerts>
	<sensors>
		<sensor activationDelay="1.0" alert="Intrusion" alertDuration="2.0" enabledObjectId="OpeningEnabled{location}" isClass="True" name="OpeningSensor" prealertDuration="2.0" type="boolean" watchedObjectId="OpeningTrigger{location}"/>
		<sensor activationDelay="1.0" alert="Fire" alertDuration="10.0" enabledObjectId="SmokeEnabled{location}" isClass="True" name="SmokeSensor" prealertDuration="0.0" type="boolean" watchedObjectId="SmokeTrigger{location}"/>
		<sensor alert="Intrusion" alertDuration="2.0" enabledObjectId="OpeningEnabledEntrance" isClass="False" name="EntranceDoorOpening" triggerValue="True" type="OpeningSensor" watchedObjectId="OpeningTriggerEntrance">
			<activationDelay>
				<value mode="Away">5.0</value>
				<value mode="Night">3.0</value>
				<value>1.0</value>
			</activationDelay>
			<prealertDuration>
				<value mode="Away">6.0</value>
				<value>2.0</value>
			</prealertDuration>
			<activationCriterion sensor="EntranceDoorOpening" type="sensor" whenTriggered="False"/>
		</sensor>
		<sensor activationDelay="5.0" alert="Intrusion" alertDuration="2.0" enabledObjectId="OpeningEnabledGarage" isClass="False" name="GarageDoorOpening" prealertDuration="2.0" triggerValue="True" type="OpeningSensor" watchedObjectId="OpeningTriggerGarage">
			<activationCriterion type="and">
				<activationCriterion sensor="EntranceDoorOpening" type="sensor" whenTriggered="False"/>
				<activationCriterion sensor="GarageDoorOpening" type="sensor" whenTriggered="False"/>
			</activationCriterion>
		</sensor>
		<sensor activationDelay="1.0" alert="Intrusion" alertDuration="2.0" enabledObjectId="OpeningEnabledKitchen" isClass="False" name="KitchenWindowOpening" prealertDuration="2.0" triggerValue="True" type="OpeningSensor" watchedObjectId="OpeningTriggerKitchen">
			<activationCriterion sensor="KitchenWindowOpening" type="sensor" whenTriggered="False"/>
		</sensor>
		<sensor alert="Intrusion" alertDuration="5.0" enabledObjectId="OpeningEnabledLivingRoom" isClass="False" name="LivingRoomWindowOpening" prealertDuration="2.0" triggerValue="True" type="OpeningSensor" watchedObjectId="OpeningTriggerLivingRoom">
			<activationDelay>
				<value mode="Night">3.0</value>
				<value>1.0</value>
			</activationDelay>
			<activationCriterion sensor="LivingRoomWindowOpening" type="sensor" whenTriggered="False"/>
		</sensor>
		<sensor activationDelay="1.0" alert="Fire" alertDuration="10.0" enabledObjectId="SmokeEnabledBedroom" isClass="False" name="BedroomSmokeSensor" prealertDuration="0.0" triggerValue="True" type="SmokeSensor" watchedObjectId="SmokeTriggerBedroom">
			<activationCriterion sensor="BedroomSmokeSensor" type="sensor" whenTriggered="False"/>
		</sensor>
		<sensor activationDelay="1.0" alert="Fire" alertDuration="10.0" enabledObjectId="SmokeEnabledKitchen" isClass="False" name="KitchenSmokeSensor" prealertDuration="0.0" triggerValue="True" type="SmokeSensor" watchedObjectId="SmokeTriggerKitchen">
			<activationCriterion sensor="KitchenSmokeSensor" type="sensor" whenTriggered="False"/>
		</sensor>
		<sensor activationDelay="0" alert="Temperature" alertDuration="0" enabledObjectId="OutdoorTemperatureEnabled" hysteresis="2.0" isClass="False" lowerBound="0.0" name="OutdoorTemperature" prealertDuration="0" type="float" upperBound="30.5" watchedObjectId="OutdoorTemperature">
			<activationCriterion sensor="OutdoorTemperature" type="sensor" whenTriggered="False"/>
		</sensor>
	</sensors>
	<services>
		<linknx host="localhost" port="1030"/>
		<daemon host="localhost" port="1031"/>
	</services>
</config>
